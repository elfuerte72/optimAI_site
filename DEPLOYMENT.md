# Руководство по развертыванию на Vercel

## Предварительные требования
- Аккаунт Vercel, подключенный к GitHub
- Node.js и npm установлены локально
- Доступ к репозиторию проекта

## Локальная настройка

1. **Установка Vercel CLI:**
   ```bash
   npm install -g vercel
   ```

2. **Авторизация в Vercel:**
   ```bash
   vercel login
   ```
   
3. **Привязка проекта:**
   ```bash
   vercel link
   ```
   Следуйте инструкциям в терминале, выбрав нужную область видимости и проект.

## Переменные окружения

В Vercel необходимо настроить следующие переменные окружения:

| Переменная | Описание | Пример |
|------------|----------|--------|
| `API_URL` | URL API бэкенда | `https://api.example.com` |
| `API_KEY` | Ключ доступа к API | `api_optimaai` |
| `NEXT_PUBLIC_API_URL` | Публичный URL фронтенда | `https://app.example.com` |

Для настройки переменных окружения:
1. Перейдите в панель управления Vercel
2. Выберите ваш проект
3. Перейдите в Settings → Environment Variables
4. Добавьте необходимые переменные для Production и Preview окружений

## Настройка сборки

В файле `package.json` проекта настроены следующие скрипты:
- `npm run build` - сборка проекта для продакшен
- `npm run start` - запуск продакшен-версии
- `npm run dev` - запуск в режиме разработки

Vercel автоматически использует команду `npm run build` для сборки проекта.

## Рабочий процесс Git

- **Основная ветка (main/dev):** автоматическое развертывание в Production при пуше
- **Pull Request'ы:** автоматическое создание Preview-окружений для тестирования
- **Ручное развертывание:** `vercel --prod`

## Мониторинг и устранение неполадок

- **Логи развертывания:** Vercel Dashboard → Deployments → [deployment] → Logs
- **Аналитика:** Vercel Dashboard → Analytics
- **Статус функций:** Vercel Dashboard → Functions

## Настройка домена

1. В панели управления Vercel перейдите в раздел Domains
2. Добавьте ваш домен и следуйте инструкциям по настройке DNS

## Полезные команды

- `vercel` - создание preview-деплоя
- `vercel --prod` - создание production-деплоя
- `vercel env ls` - просмотр переменных окружения
- `vercel env add` - добавление переменной окружения
- `vercel logs` - просмотр логов
- `vercel domains ls` - просмотр доменов проекта

## Решение проблем

### Ошибка сборки из-за линтера
Если сборка не проходит из-за ошибок линтера, можно:
1. Исправить все ошибки линтера в коде
2. Временно отключить линтер при сборке, добавив флаг `--no-lint` в скрипт build
3. Добавить переменную окружения `NEXT_DISABLE_ESLINT=1` в Vercel

### Проблемы с переменными окружения
Убедитесь, что все необходимые переменные окружения добавлены и имеют правильные значения для каждого окружения (Production/Preview).

### Ошибки сборки Next.js
Проверьте логи сборки и убедитесь, что сборка успешно проходит локально с помощью команды `npm run build`. 