# üöÄ –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é Next.js –∫ OptimaAI Bot

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å

**URL –±–æ—Ç–∞:** `http://localhost:8000/api/chat`  
**API –∫–ª—é—á:** `api_optimaai`  
**–ú–µ—Ç–æ–¥:** `POST`

## ‚úÖ –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

1. ‚úÖ **–£–¥–∞–ª–µ–Ω–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** - —á–∞—Ç —Ç–µ–ø–µ—Ä—å –ø—É—Å—Ç–æ–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
2. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω API –∫–ª—é—á** –≤ `.env.local`: `API_KEY=api_optimaai`
3. ‚úÖ **–ò–∑–º–µ–Ω–µ–Ω endpoint** –Ω–∞ `/api/chat` –≤–º–µ—Å—Ç–æ `/chat`
4. ‚úÖ **API –∫–ª—é—á –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π** - –≤—Å–µ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `X-API-Key`
5. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã** —Å –Ω–æ–≤—ã–º API –∫–ª—é—á–æ–º

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env.local`)
```env
# URL –±—ç–∫–µ–Ω–¥–∞ –¥–ª—è API —Ä–æ—É—Ç–æ–≤ Next.js
API_URL=http://localhost:8000

# API –∫–ª—é—á –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
API_KEY=api_optimaai
```

### 2. API —Ä–æ—É—Ç—ã Next.js
- **`/api/chat`** - –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ `http://localhost:8000/api/chat`
- **`/api/health`** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±—ç–∫–µ–Ω–¥–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫** `X-API-Key: api_optimaai`

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞
```javascript
// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫ Next.js API Route
fetch('/api/chat', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
    // X-API-Key –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ API Route
  },
  body: JSON.stringify({
    messages: [
      { role: 'user', content: '–í–∞—à –≤–æ–ø—Ä–æ—Å' }
    ]
  })
})
```

### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞
```json
{
  "message": {
    "role": "assistant",
    "content": "–û—Ç–≤–µ—Ç –±–æ—Ç–∞"
  },
  "finish_reason": "stop",
  "processing_time": 2.5,
  "from_cache": false,
  "model": "gpt-4o-mini"
}
```

## üéØ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ** –≤ —á–∞—Ç
2. **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ–±–∞–≤–ª—è–µ—Ç** –µ–≥–æ –≤ –∏—Å—Ç–æ—Ä–∏—é –∫–∞–∫ `{role: "user", content: "—Ç–µ–∫—Å—Ç"}`
3. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é** –Ω–∞ `/api/chat` (Next.js API Route)
4. **Next.js API Route** –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-API-Key: api_optimaai`
5. **–ü—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å** –∫ `http://localhost:8000/api/chat`
6. **–ü–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –±–æ—Ç–∞** –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É
7. **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ–±–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç** –≤ –∏—Å—Ç–æ—Ä–∏—é –∫–∞–∫ `{role: "assistant", content: "–æ—Ç–≤–µ—Ç_–±–æ—Ç–∞"}`
8. **–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∏–∞–ª–æ–≥** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

- ‚úÖ **API –∫–ª—é—á `api_optimaai`** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å
- ‚úÖ **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Å—è –∏—Å—Ç–æ—Ä–∏—è** –¥–∏–∞–ª–æ–≥–∞, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- ‚úÖ **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏** - –µ—Å–ª–∏ –±—ç–∫–µ–Ω–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ Telegram
- ‚úÖ **–ù–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è** - —á–∞—Ç –ø—É—Å—Ç–æ–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- ‚úÖ **Endpoint –∏–∑–º–µ–Ω–µ–Ω** –Ω–∞ `/api/chat` —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥
```bash
cd /Users/maximpenkin/Documents/openai/site/backend
python main.py
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
```bash
cd /Users/maximpenkin/Documents/openai/site/optimAI_site
npm run dev
```

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API
```bash
node test-api.js
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000`
- –ß–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º (–±–µ–∑ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è)
- –ù–∞–∂–º–∏—Ç–µ –ª—é–±—É—é –∏–∑ –∫–Ω–æ–ø–æ–∫ –±—ã—Å—Ç—Ä—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä—è–º–æ–π —Ç–µ—Å—Ç –±—ç–∫–µ–Ω–¥–∞
```bash
curl -X POST http://localhost:8000/api/chat \
  -H "Content-Type: application/json" \
  -H "X-API-Key: api_optimaai" \
  -d '{"messages":[{"role":"user","content":"–ü—Ä–∏–≤–µ—Ç!"}]}'
```

### –¢–µ—Å—Ç —á–µ—Ä–µ–∑ Next.js API
```bash
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"messages":[{"role":"user","content":"–ü—Ä–∏–≤–µ—Ç!"}]}'
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —á–∞—Ç-–±–æ—Ç:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –∫–ª—é—á `api_optimaai`
- ‚úÖ –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É endpoint `/api/chat`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏
- ‚úÖ –°—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ Telegram –∫–∞–Ω–∞–ª –≤–º–µ—Å—Ç–æ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è API –∫–ª—é—á–∞ –∏ –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å! ü§ñ‚ú®